#:kivy 2.1.0
#:import utils kivy.utils

# blue = background_color: utils.get_color_from_hex('#0E2BF1')
# yellow = background_color: utils.get_color_from_hex('#E9F20D')
# red = background_color: utils.get_color_from_hex('#FF0000')
# green = background_color: utils.get_color_from_hex('#00FF00')
<GenericFolderSelector>:
    input_result: input_result
    text = ''
    size_hint: 1.0, 0.1
    BoxLayout:
        orientation: 'horizontal'
        Button:
            text: "Change Input Folder"
            background_color: utils.get_color_from_hex('#E9F20D')
            size_hint: 0.25, 1.0
            pos_hint: {'center': 1}
            on_press: root.show_load()
        Label:
            id: input_result
            text: root.get_initial_value()
            size_hint: 0.7, 1.0
            valign: 'center'
            texture_size: self.size
            text_size: self.size
            padding_x: 10

<InputFolderSelector>:
    input_result: input_result
    size_hint: 1.0, 0.1
    BoxLayout:
        orientation: 'horizontal'
        Button:
            text: "Change Input Folder"
            background_color: utils.get_color_from_hex('#E9F20D')
            size_hint: 0.25, 1.0
            pos_hint: {'center': 1}
            on_press: root.show_load()
        Label:
            id: input_result
            text: root.get_initial_value()
            size_hint: 0.7, 1.0
            valign: 'center'
            texture_size: self.size
            text_size: self.size
            padding_x: 10

<OutputFolderSelector>:
    output_result: output_result
    size_hint: 1.0, 0.1
    BoxLayout:
        orientation: 'horizontal'
        Button:
            text: "Change Output Folder"
            background_color: utils.get_color_from_hex('#E9F20D')
            size_hint: 0.25, 1.0
            pos_hint: {'center': 1}
            on_press: root.show_load()
        Label:
            id: output_result
            text: root.get_initial_value()
            size_hint: 0.7, 1.0
            pos_hint: {'right': 1, 'center': 1}
            texture_size: self.size
            text_size: self.size
            valign: 'center'
            padding_x: 10

<IgnoreFoldersSelector>:
    id: _container
    text: ''
    selected: False
    callback: None
    size_hint: 1.0, None
    BoxLayout:
        orientation: 'horizontal'
        Button:
            text: "Add a folder\nto ignore"
            background_color: utils.get_color_from_hex('#E9F20D')
            size_hint: 0.4, 1.0
            pos_hint: {'center': 1}
            # active: _container.selected
            on_press: root.show_load()
        ScrollView:
            do_scroll_x: True
            do_scroll_y: True
            Label:
                text: _container.text
                size_hint: 0.5, 1.0
                height: self.texture_size[1]
                text_size: self.width, None
                padding: 10, 10
        Button:
            text: "Clear"
            size_hint: 0.1, 1.0
            background_color: utils.get_color_from_hex('#FF0000')
            on_press: root.clear()

<SkipFoldersSelector>:
    id: _container
    text: ''
    selected: False
    callback: None
    size_hint: 1.0, None
    BoxLayout:
        orientation: 'horizontal'
        Button:
            text: "Add a folder\nNAME to ignore"
            background_color: utils.get_color_from_hex('#E9F20D')
            size_hint: 0.4, 1.0

            pos_hint: {'center': 1}
            # active: _container.selected
            on_press: root.show_load()
        ScrollView:
            do_scroll_x: True
            do_scroll_y: True
            Label:
                size_hint: 0.5, 1.0
                text: _container.text
                height: self.texture_size[1]
                text_size: self.width, None
                padding: 10, 10
        Button:
            text: "Clear"
            size_hint: 0.1, 1.0
            background_color: utils.get_color_from_hex('#FF0000')
            on_press: root.clear()


<CheckBoxItem>:
    text: ''
    callback: None
    check_value: False
    size_hint: 1.0, 0.1
    BoxLayout:
        orientation: 'horizontal'
        CheckBox:
            id: _checkbox
            size_hint: 0.15, 1.0
            pos_hint: {'right': 1, 'center': 0.5}
            active: root.check_value
            on_active: root.selected(self)
        Label:
            size_hint: 0.9, 1.0
            pos_hint: {'center': 1}
            texture_size: self.size
            text_size: self.size
            halign: 'left'
            valign: 'center'
            text: root.text

<MainScreen>:  # This is a BoxLayout
    orientation: 'vertical'
    BoxLayout:
        orientation: 'horizontal'
        size_hint_x: 1
        size_hint_y: .15
        Button
            text: 'Setup Page -> Press "Go" to process Input Folder'
        Button:
            text: 'Help'
            size_hint_x: .2
            background_color: utils.get_color_from_hex('#0E2BF1')
            on_release: root.help()
        Button:
            text: 'About'
            size_hint_x: .2
            background_color: utils.get_color_from_hex('#00FF00')
            on_release: root.about()
    InputFolderSelector:
    OutputFolderSelector:
    IgnoreFoldersSelector:
    SkipFoldersSelector:
    CheckBoxItem:
        text: "Recreate - recreate output folder - ALL PREVIOUS FILES will be backed up!"
        check_value: False
        callback: self.set_recreate

<Progress>:
    progress_bar: progress_bar
    progress_summary: progress_summary
    progress_text: progress_text
    exit_button: exit_button
    BoxLayout:
        orientation: 'vertical'
        size: root.width, root.height
        Label:
            size_hint_y:.05
            halign: 'center'
            text: "Progress"
        ProgressBar:
            id: progress_bar
            #max: app.input_files
            pos_hint: {'x': .1}
            size_hint_x: .8
            size_hint_y: .1
        BoxLayout:
            id: progress_text
            orientation: 'horizontal'
            TextInput:
                size_hint_x: .4
                id: progress_summary
            TextInput:
                id: progress_text
        Button:
            id: exit_button
            size_hint_y: .1
            text: "Abort"
            background_color: utils.get_color_from_hex('#FF0000')
            on_release:
                root.abort()


<ActionBox>:
    size_hint: 1.0, .2
    padding: 10, 10
    orientation: 'horizontal'
    Button:
        text: "Go"
        background_color: utils.get_color_from_hex('#00FF00')
        on_press: root.start_processing()
    Button:
        text: "Cancel"
        background_color: utils.get_color_from_hex('#FF0000')
        on_release: root.parent.exit(1)


<DismissDialog>:
    # Reusable dialog to display warnings/errors/info
    BoxLayout:

        pos_hint: {'right': 1, 'center': 0.5}
        orientation: 'vertical'
        Label:
            text: root.error_text
        Button:
            size_hint: 1, 0.2
            text: "Dismiss"
            background_color: utils.get_color_from_hex('#0E2BF1')
            on_release:
                root.dismiss()



<LoadDialog>:
    id: _load_dialog
    filechooser: file_chooser
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserIconView:
            id: file_chooser
            dirselect: True
            filters: ['']

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Select"
                on_release: root.load(file_chooser.path, file_chooser.selection)
            Button:
                text: "Cancel"
                on_release: root.cancel()

<AddDialog>:
    id: _load_dialog
    filechooser: filechooser
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserIconView:
            id: filechooser
            dirselect: True
            filters: ['']
        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Select"
                on_release: root.load(filechooser.path, filechooser.selection)
            Button:
                text: "New Folder"
                on_release: root.new(filechooser.path, filechooser.selection)
            Button:
                text: "Cancel"
                on_release: root.cancel()
